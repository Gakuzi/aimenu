<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–°–ï–ú–ï–ô–ù–û–ï –ú–ï–ù–Æ</title>
    
    <!-- PWA Manifest & Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#F9F7F4">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="–°–ï–ú–ï–ô–ù–û–ï –ú–ï–ù–Æ">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU2IiBoZWlnaHQ9IjI1NiIgdmlld0JveD0iMCAwIDI1NiAyNTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyNTYiIGhlaWdodD0iMjU2IiByeD0iNTgiIGZpbGw9IiNGOUY3RjQiLz4KPHBhdGggZD0iTTg3LjM0NzIgMTE4LjY2QzgwLjQxNjEgMTE3LjU3NyA3NC4xMTE4IDEyMy43MDQgNzQuMTExOCAxMzAuOEM3NC4xMTE4IDEzNy41MjggNzkuNTg5OCAxNDMuMTExIDg2LjY0MDcgMTQzLjExMUM5My44NDAyIDE0My4xMTEgOTkuNjA4NiAxMzcuMzQzIDk5LjYwODYgMTMwLjE0MkM5OS42MDg2IDEyNC4wNSA5NC45MDk3IDExOS4zNjYgODguODIzNSAxMTguNzgyTDg3LjM0NzIgMTE4LjY2WiIgZmlsbD0iI0Q0QTM3MyIvPgo8cGF0aCBkPSJNMTE5LjMyMiAxNTkuMDQ5QzExOS4zMjIgMTY5LjY1MSAxMjQuODExIDE3NS4xMzkgMTM1LjQxOCAxNzUuMTM5QzE0Ni4wMjUgMTc1LjEzOSAxNTEuNTEzIDE2OS42NTEgMTUxLjUxMyAxNTkuMDQ5QzE1MS41MTMgMTQ4LjQ0MiAxNDYuMDI1IDE0Mi45NTQgMTM1LjQxOCAxNDIuOTU0QzEyNC44MTEgMTQyLjk1NCAxMTkuMzIyIDE0OC40NDIgMTE5LjMyMiAxNTkuMDQ5WiIgZmlsbD0iIzhCNUUzQyIvPgo8cGF0aCBkPSJNMTY3LjUxNCAxMTguNjZDMTczLjAxOCAxMTkuNDAyIDE3Ny44MTcgMTI0LjA5MSAxNzcuODE3IDEzMC4xNDJDMTc3LjgxNyAxMzcuMzQzIDE4My41ODYgMTQzLjExMSAxOTAuNzgzIDE0My4xMTFDMTk3Ljc4OSAxNDMuMTExIDIwMy4yNjcgMTM3LjUyOCAyMDMyNjcgMTMwLjhDMjAzLjI2NyAxMjMuNzA0IDE5Ni45NjMgMTE3LjU3NyAxOTAuMDI2IDExOC42NkwxODguNTU5IDExOC43ODJDMTc5LjM0MiAxMTYuNzk2IDE3MS4yMTMgMTE3LjAxMSAxNjcuNTE0IDExOC42NloiIGZpbGw9IiNENEEzNzMiLz4KPHBhdGggZD0iTTk3LjM4MjYgODVDOTIuODg2MiA4NS4zMjY0IDg5IDEwMC40OTEgODkgMTAzLjM5MUM4OSAxMDYuMjkyIDkyLjg4NjIgMTE4IDk3LjM4MjYgMTE4QzEwMS44NzkgMTE4IDEwNS43NjUgMTA2LjI5MiAxMDUuNzY1IDEwMy4zOTFDMTExLjMyNCA5NC45MTM3IDEwMy41MDcgODQuNTM1MiA5Ny4zODI2IDg1WiIgZmlsbD0id2hpdGUiIHN0cm9rZT0iI0Q0QTM3MyIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xNTguNjE3IDg1QzE2My4xMTQgODUuMzI2NCAxNjcgMTAwLjQ5MSAxNjcgMTAzLjM5MUMxNjcgMTA2LjI5MiAxNjMuMTE0IDExOCAxNTguNjE3IDExOEMxNTQuMTIxIDExOCAxNTAuMjM1IDEwNi4yOTIgMTUwLjIzNSAxMDMuMzkxQzE0NC42NzYgOTQuOTEzNyAxNTIuNDkzIDg0LjUzNTIgMTU4LjYxNyA4NVoiIGZpbGw9IndoaXRlIiBzdHJva2U9IiNENEEzNzMiIHN0cm9rZS1widthPSI1IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ0Ik0xMjggODVDMTMyLjQ5NyA4NS4zMjY0IDEzNi4zODIgMTAwLjQ5MSAxMzYuMzgyIDEwMy4zOTFDMTM2LjM4MiAxMDYuMjkyIDEzMi40OTcgMTE4IDEyOCAxMThDMTIzLjUwNCAxMTggMTE5LjYxOCAxMDYuMjkyIDExOS42MTggMTAzLjM5MUMxMTQuMDU5IDk0LjkxMzcgMTIxLjg4IDg0LjUzNTIgMTI4IDg1WiIgZmlsbD0id2hpdGUiIHN0cm9rZT0iI0Q0QTM3MyIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo=">
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU2IiBoZWlnaHQ9IjI1NiIgdmlld0JveD0iMCAwIDI1NiAyNTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyNTYiIGhlaWdodD0iMjU2IiByeD0iNTgiIGZpbGw9IiNGOUY3RjQiLz4KPHBhdGggZD0iTTg3LjM0NzIgMTE4LjY2QzgwLjQxNjEgMTE3LjU3NyA3NC4xMTE4IDEyMy43MDQgNzQuMTExOCAxMzAuOEM3NC4xMTE4IDEzNy41MjggNzkuNTg5OCAxNDMuMTExIDg2LjY0MDcgMTQzLjExMUM5My44NDAyIDE0My4xMTEgOTkuNjA4NiAxMzcuMzQzIDk5LjYwODYgMTMwLjE0MkM5OS42MDg2IDEyNC4wNSA5NC45MDk3IDExOS4zNjYgODguODIzNSAxMTguNzgyTDg3LjM0NzIgMTE4LjY2WiIgZmlsbD0iI0Q0QTM3MyIvPgo8cGF0aCBkPSJNMTE5LjMyMiAxNTkuMDQ5QzExOS4zMjIgMTY5LjY1MSAxMjQuODExIDE3NS4xMzkgMTM1LjQxOCAxNzUuMTM5QzE0Ni4wMjUgMTc1LjEzOSAxNTEuNTEzIDE2OS42NTEgMTUxLjUxMyAxNTkuMDQ5QzE1MS41MTMgMTQ4LjQ0MiAxNDYuMDI1IDE0Mi45NTQgMTM1LjQxOCAxNDIuOTU0QzEyNC44MTEgMTQyLjk1NCAxMTkuMzIyIDE0OC40NDIgMTE5LjMyMiAxNTkuMDQ5WiIgZmlsbD0iIzhCNUUzQyIvPgo8cGF0aCBkPSJNMTY3LjUxNCAxMTguNjZDMTczLjAxOCAxMTkuNDAyIDE3Ny44MTcgMTI0LjA5MSAxNzcuODE3IDEzMC4xNDJDMTc3LjgxNyAxMzcuMzQzIDE4My41ODYgMTQzLjExMSAxOTAuNzgzIDE0My4xMTFDMTk3Ljc4OSAxNDMuMTExIDIwMy4yNjcgMTM3LjUyOCAyMDMyNjcgMTMwLjhDMjAzLjI2NyAxMjMuNzA0IDE5Ni45NjMgMTE3LjU3NyAxOTAuMDI2IDExOC42NkwxODguNTU5IDExOC43ODJDMTc5LjM0MiAxMTYuNzk2IDE3MS4yMTMgMTE3LjAxMSAxNjcuNTE0IDExOC42NloiIGZpbGw9IiNENEEzNzMiLz4KPHBhdGggZD0iTTk3LjM4MjYgODVDOTIuODg2MiA4NS4zMjY0IDg5IDEwMC40OTEgODkgMTAzLjM5MUM4OSAxMDYuMjkyIDkyLjg4NjIgMTE4IDk3LjM4MjYgMTE4QzEwMS44NzkgMTE4IDEwNS43NjUgMTA2LjI5MiAxMDUuNzY1IDEwMy4zOTFDMTExLjMyNCA5NC45MTM3IDEwMy41MDcgODQuNTM1MiA5Ny4zODI2IDg1WiIgZmlsbD0id2hpdGUiIHN0cm9rZT0iI0Q0QTM3MyIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xNTguNjE3IDg1QzE2My4xMTQgODUuMzI2NCAxNjcgMTAwLjQ5MSAxNjcgMTAzLjM5MUMxNjcgMTA2LjI5MiAxNjMuMTE0IDExOCAxNTguNjE3IDExOEMxNTQuMTIxIDExOCAxNTAuMjM1IDEwNi4yOTIgMTUwLjIzNSAxMDMuMzkxQzE0NC42NzYgOTQuOTEzNyAxNTIuNDkzIDg0LjUzNTIgMTU4LjYxNyA4NVoiIGZpbGw9IndoaXRlIiBzdHJva2U9IiNENEEzNzMiIHN0cm9rZS1widthPSI1IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ0Ik0xMjggODVDMTMyLjQ5NyA4NS4zMjY0IDEzNi4zODIgMTAwLjQ5MSAxMzYuMzgyIDEwMy4zOTFDMTM2LjM4MiAxMDYuMjkyIDEzMi40OTcgMTE4IDEyOCAxMThDMTIzLjUwNCAxMTggMTE5LjYxOCAxMDYuMjkyIDExOS42MTggMTAzLjM5MUMxMTQuMDU5IDk0LjkxMzcgMTIxLjg4IDg0LjUzNTIgMTI4IDg1WiIgZmlsbD0id2hpdGUiIHN0cm9rZT0iI0Q0QTM3MyIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo=">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body>

<div id="app">
    <!-- –≠–∫—Ä–∞–Ω-–∑–∞—Å—Ç–∞–≤–∫–∞ -->
    <div class="screen" id="splash-screen">
        <svg class="splash-logo" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg" width="100" height="100"><rect width="256" height="256" rx="58" fill="#F9F7F4"/><path d="M87.347 118.66C80.416 117.577 74.112 123.704 74.112 130.8c0 6.796 5.478 12.31 12.529 12.31 7.201 0 12.969-5.768 12.969-12.969 0-6.09-4.7-10.779-10.765-11.338l-1.476-.122z" fill="#D4A373"/><path d="M119.322 159.049c0 10.609 5.489 16.09 16.096 16.09s16.095-5.481 16.095-16.09-5.488-16.095-16.095-16.095-16.096 5.488-16.096 16.095z" fill="#8B5E3C"/><path d="M167.514 118.66c5.504.742 10.303 5.431 10.303 11.482 0 7.201 5.769 12.969 12.969 12.969 7.006 0 12.484-5.522 12.484-12.31 0-7.104-6.304-13.227-12.941-12.14l-1.467.122c-9.217-1.986-17.346-1.649-21.35-0z" fill="#D4A373"/><path d="M97.383 85c-4.496.326-8.383 15.49-8.383 18.39 0 2.9 3.887 14.609 8.383 14.609s8.382-11.709 8.382-14.609c5.559-8.477-1.628-18.855-8.382-18.39z" fill="#fff" stroke="#D4A373" stroke-width="5" stroke-linejoin="round"/><path d="M158.617 85c4.497.326 8.383 15.49 8.383 18.39 0 2.9-3.886 14.609-8.383 14.609s-8.382-11.709-8.382-14.609c-5.559-8.477 1.628-18.855 8.382-18.39z" fill="#fff" stroke="#D4A373" stroke-width="5" stroke-linejoin="round"/><path d="M128 85c4.497.326 8.382 15.49 8.382 18.39 0 2.9-3.885 14.609-8.382 14.609s-8.382-11.709-8.382-14.609c-5.559-8.477 1.621-18.855 8.382-18.39z" fill="#fff" stroke="#D4A373" stroke-width="5" stroke-linejoin="round"/></svg>
        <h1 class="splash-title">–°–ï–ú–ï–ô–ù–û–ï –ú–ï–ù–Æ</h1>
        <div class="splash-animation-container">
            <div class="splash-step">
                <div class="splash-icon">üóìÔ∏è</div>
                <div class="splash-text">–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</div>
            </div>
            <div class="splash-arrow">‚Üí</div>
            <div class="splash-step">
                <div class="splash-icon">üõí</div>
                <div class="splash-text">–ü–æ–∫—É–ø–∫–∏</div>
            </div>
            <div class="splash-arrow">‚Üí</div>
            <div class="splash-step">
                <div class="splash-icon">üë©‚Äçüç≥</div>
                <div class="splash-text">–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ</div>
            </div>
        </div>
        <button class="primary-button" id="start-app-btn" style="width: 200px">–ù–∞—á–∞—Ç—å</button>
        <div class="author-info" style="
            position: absolute;
            bottom: calc(20px + env(safe-area-inset-bottom));
            font-size: 14px;
            color: var(--soft-text);
            opacity: 0;
            animation: fadeIn 1s 2.5s forwards;
            text-align: center;
        ">
            –ê–≤—Ç–æ—Ä: –ö–ª–∏–º–æ–≤ –ï–≤–≥–µ–Ω–∏–π<br>
            <a href="https://t.me/eklimov" target="_blank" style="color: var(--accent-color); text-decoration: none;">–°–≤—è–∑–∞—Ç—å—Å—è –≤ Telegram</a>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è -->
    <div class="screen hidden" id="welcome-screen">
        <div class="setup-container">
            <svg class="setup-logo" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg" width="80" height="80"><rect width="256" height="256" rx="58" fill="#F9F7F4"/><path d="M87.347 118.66C80.416 117.577 74.112 123.704 74.112 130.8c0 6.796 5.478 12.31 12.529 12.31 7.201 0 12.969-5.768 12.969-12.969 0-6.09-4.7-10.779-10.765-11.338l-1.476-.122z" fill="#D4A373"/><path d="M119.322 159.049c0 10.609 5.489 16.09 16.096 16.09s16.095-5.481 16.095-16.09-5.488-16.095-16.095-16.095-16.096 5.488-16.096 16.095z" fill="#8B5E3C"/><path d="M167.514 118.66c5.504.742 10.303 5.431 10.303 11.482 0 7.201 5.769 12.969 12.969 12.969 7.006 0 12.484-5.522 12.484-12.31 0-7.104-6.304-13.227-12.941-12.14l-1.467.122c-9.217-1.986-17.346-1.649-21.35-0z" fill="#D4A373"/><path d="M97.383 85c-4.496.326-8.383 15.49-8.383 18.39 0 2.9 3.887 14.609 8.383 14.609s8.382-11.709 8.382-14.609c5.559-8.477-1.628-18.855-8.382-18.39z" fill="#fff" stroke="#D4A373" stroke-width="5" stroke-linejoin="round"/><path d="M158.617 85c4.497.326 8.383 15.49 8.383 18.39 0 2.9-3.886 14.609-8.383 14.609s-8.382-11.709-8.382-14.609c-5.559-8.477 1.628-18.855 8.382-18.39z" fill="#fff" stroke="#D4A373" stroke-width="5" stroke-linejoin="round"/><path d="M128 85c4.497.326 8.382 15.49 8.382 18.39 0 2.9-3.885 14.609-8.382 14.609s-8.382-11.709-8.382-14.609c-5.559-8.477 1.621-18.855 8.382-18.39z" fill="#fff" stroke="#D4A373" stroke-width="5" stroke-linejoin="round"/></svg>
            <h1 class="setup-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h1>
            <p class="setup-subtitle">–ö–∞–∫ –≤—ã —Ö–æ—Ç–∏—Ç–µ –Ω–∞—á–∞—Ç—å?</p>
            <div class="welcome-buttons">
                <button class="primary-button" id="start-setup-wizard-btn">üöÄ –ù–∞—á–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É</button>
                <button class="secondary-button" id="load-from-file-btn">üì• –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ —Ñ–∞–π–ª–∞</button>
                <button class="secondary-button" id="scan-qr-btn">üì∑ –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR</button>
            </div>
            <p class="welcome-info">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ —Ñ–∞–π–ª–∞ –∏–ª–∏ –æ—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥ —Å –¥—Ä—É–≥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, —á—Ç–æ–±—ã –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É.</p>
        </div>
    </div>


    <!-- –≠–∫—Ä–∞–Ω –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ -->
    <div class="screen hidden" id="setup-screen">
        <button id="back-to-welcome-btn" class="back-button" style="position: absolute; top: calc(15px + env(safe-area-inset-top)); left: 15px; z-index: 10;">‚óÄÔ∏é –ù–∞–∑–∞–¥</button>
        <div class="setup-container">
             <svg class="setup-logo" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg" width="80" height="80"><rect width="256" height="256" rx="58" fill="#F9F7F4"/><path d="M87.347 118.66C80.416 117.577 74.112 123.704 74.112 130.8c0 6.796 5.478 12.31 12.529 12.31 7.201 0 12.969-5.768 12.969-12.969 0-6.09-4.7-10.779-10.765-11.338l-1.476-.122z" fill="#D4A373"/><path d="M119.322 159.049c0 10.609 5.489 16.09 16.096 16.09s16.095-5.481 16.095-16.09-5.488-16.095-16.095-16.095-16.096 5.488-16.096 16.095z" fill="#8B5E3C"/><path d="M167.514 118.66c5.504.742 10.303 5.431 10.303 11.482 0 7.201 5.769 12.969 12.969 12.969 7.006 0 12.484-5.522 12.484-12.31 0-7.104-6.304-13.227-12.941-12.14l-1.467.122c-9.217-1.986-17.346-1.649-21.35-0z" fill="#D4A373"/><path d="M97.383 85c-4.496.326-8.383 15.49-8.383 18.39 0 2.9 3.887 14.609 8.383 14.609s8.382-11.709 8.382-14.609c5.559-8.477-1.628-18.855-8.382-18.39z" fill="#fff" stroke="#D4A373" stroke-width="5" stroke-linejoin="round"/><path d="M158.617 85c4.497.326 8.383 15.49 8.383 18.39 0 2.9-3.886 14.609-8.383 14.609s-8.382-11.709-8.382-14.609c-5.559-8.477 1.628-18.855 8.382-18.39z" fill="#fff" stroke="#D4A373" stroke-width="5" stroke-linejoin="round"/><path d="M128 85c4.497.326 8.382 15.49 8.382 18.39 0 2.9-3.885 14.609-8.382 14.609s-8.382-11.709-8.382-14.609c-5.559-8.477 1.621-18.855 8.382-18.39z" fill="#fff" stroke="#D4A373" stroke-width="5" stroke-linejoin="round"/></svg>
            <h1 class="setup-title">–°–ï–ú–ï–ô–ù–û–ï –ú–ï–ù–Æ</h1>
            <p class="setup-subtitle">–í–∞—à –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –≤–∫—É—Å–Ω—ã—Ö –∏ –ø—Ä–æ—Å—Ç—ã—Ö —Å–µ–º–µ–π–Ω—ã—Ö –æ–±–µ–¥–æ–≤.</p>
            <p class="wizard-step-counter" id="wizard-step-counter"></p>
            
            <div id="setup-wizard">
                <div class="wizard-step" data-step="1">
                    <h3 class="wizard-step-title">–®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ò–ò</h3>
                    <p class="wizard-step-description">–î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã —É–∫–∞–∂–∏—Ç–µ –≤–∞—à API –∫–ª—é—á –¥–ª—è Google Gemini.</p>
                    <a href="#" id="api-key-help-link" class="api-key-help-link">–ì–¥–µ –≤–∑—è—Ç—å –∫–ª—é—á? –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</a>
                    <div class="input-group">
                        <input type="password" id="api-key-input" placeholder="–í–∞—à Google Gemini API –∫–ª—é—á">
                    </div>
                </div>

                <div class="wizard-step" data-step="2">
                    <h3 class="wizard-step-title">–®–∞–≥ 2: –û–Ω–ª–∞–π–Ω-—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</h3>
                    <p class="wizard-step-description">–í–≤–µ–¥–∏—Ç–µ –≤–∞—à X-Master-Key –æ—Ç JSONBin.io. –ï—Å–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å ID —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –ø—É—Å—Ç—ã–º, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ <strong>—Å–æ–∑–¥–∞—Å—Ç –Ω–æ–≤–æ–µ</strong>. –≠—Ç–æ—Ç —à–∞–≥ –º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å.</p>
                    <a href="#" id="jsonbin-help-link" class="api-key-help-link">–ì–¥–µ –≤–∑—è—Ç—å –∫–ª—é—á–∏ –¥–ª—è JSONBin?</a>
                     <div class="settings-form-group">
                        <input type="password" id="wizard-jsonbin-api-key" class="settings-input" placeholder="JSONBin.io X-Master-Key (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
                    </div>
                    <div class="settings-form-group">
                       <input type="text" id="wizard-jsonbin-bin-id" class="settings-input" placeholder="JSONBin.io Bin ID (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –Ω–æ–≤–æ–≥–æ)">
                    </div>
                </div>

                <div class="wizard-step" data-step="3">
                    <h3 class="wizard-step-title">–®–∞–≥ 3: –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –≤–∞—à–µ–π —Å–µ–º—å–µ</h3>
                    <p class="wizard-step-description">–≠—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ–º–æ–∂–µ—Ç –ò–ò —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç—å –∏ —Ä–∞–∑–º–µ—Ä –ø–æ—Ä—Ü–∏–π. –î–æ–±–∞–≤—å—Ç–µ –∫–∞–∂–¥–æ–≥–æ —á–ª–µ–Ω–∞ —Å–µ–º—å–∏.</p>
                    <div id="wizard-family-members-container"></div>
                    <button class="secondary-button" id="wizard-add-family-member-btn" style="height: 45px; font-size: 16px;">+ –î–æ–±–∞–≤–∏—Ç—å —á–ª–µ–Ω–∞ —Å–µ–º—å–∏</button>
                </div>

                <div class="wizard-step" data-step="4">
                    <h3 class="wizard-step-title">–®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–∞—à–µ –º–µ–Ω—é</h3>
                    <p class="wizard-step-description">–£–∫–∞–∂–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.</p>
                    <div class="settings-form-group">
                        <label for="wizard-menu-duration">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –º–µ–Ω—é</label>
                        <input type="number" id="wizard-menu-duration" class="settings-input" min="1" max="14">
                    </div>
                    <div class="settings-form-group">
                        <label for="wizard-total-budget">–û–±—â–∏–π –±—é–¥–∂–µ—Ç, ‚ÇΩ</label>
                        <input type="number" id="wizard-total-budget" class="settings-input" step="500">
                    </div>
                    <div class="settings-form-group">
                        <label for="wizard-preferences">–ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –∏ –∞–ª–ª–µ—Ä–≥–∏–∏</label>
                        <textarea id="wizard-preferences" class="settings-textarea" rows="2" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –±–µ–∑ —Ä—ã–±—ã, –º–µ–Ω—å—à–µ –∂–∞—Ä–µ–Ω–æ–≥–æ"></textarea>
                    </div>
                    <div class="settings-form-group">
                        <label for="wizard-cuisine">–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º–∞—è –∫—É—Ö–Ω—è</label>
                        <select id="wizard-cuisine" class="settings-select">
                            <option value="–õ—é–±–∞—è">–õ—é–±–∞—è</option>
                            <option value="–†—É—Å—Å–∫–∞—è">–†—É—Å—Å–∫–∞—è</option>
                            <option value="–ò—Ç–∞–ª—å—è–Ω—Å–∫–∞—è">–ò—Ç–∞–ª—å—è–Ω—Å–∫–∞—è</option>
                            <option value="–ê–∑–∏–∞—Ç—Å–∫–∞—è">–ê–∑–∏–∞—Ç—Å–∫–∞—è</option>
                            <option value="–°—Ä–µ–¥–∏–∑–µ–º–Ω–æ–º–æ—Ä—Å–∫–∞—è">–°—Ä–µ–¥–∏–∑–µ–º–Ω–æ–º–æ—Ä—Å–∫–∞—è</option>
                            <option value="–ö–∞–≤–∫–∞–∑—Å–∫–∞—è">–ö–∞–≤–∫–∞–∑—Å–∫–∞—è</option>
                        </select>
                    </div>
                     <div class="settings-form-group">
                        <label for="wizard-difficulty">–°–ª–æ–∂–Ω–æ—Å—Ç—å –±–ª—é–¥</label>
                        <select id="wizard-difficulty" class="settings-select">
                            <option value="–õ—é–±–∞—è">–õ—é–±–∞—è</option>
                            <option value="–ü—Ä–æ—Å—Ç–∞—è">–ü—Ä–æ—Å—Ç–∞—è (–±—ã—Å—Ç—Ä–æ –∏ –ª–µ–≥–∫–æ)</option>
                            <option value="–°—Ä–µ–¥–Ω—è—è">–°—Ä–µ–¥–Ω—è—è (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã)</option>
                            <option value="–°–ª–æ–∂–Ω–∞—è">–°–ª–æ–∂–Ω–∞—è (–¥–ª—è –æ—Å–æ–±—ã—Ö —Å–ª—É—á–∞–µ–≤)</option>
                        </select>
                    </div>
                </div>

                <div class="wizard-step" data-step="5">
                    <h3 class="wizard-step-title">–í—Å—ë –≥–æ—Ç–æ–≤–æ –∫ –º–∞–≥–∏–∏!</h3>
                    <p class="wizard-step-description">–ú—ã —Å–æ–±—Ä–∞–ª–∏ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –Ω–∞—à –ò–ò —Å–æ–∑–¥–∞–ª –≤–∞—à–µ –∏–¥–µ–∞–ª—å–Ω–æ–µ —Å–µ–º–µ–π–Ω–æ–µ –º–µ–Ω—é –Ω–∞ –Ω–µ–¥–µ–ª—é.</p>
                </div>
            </div>
            
            <div id="wizard-nav" class="hidden">
                 <button class="secondary-button" id="wizard-back-btn">–ù–∞–∑–∞–¥</button>
                 <button class="primary-button" id="wizard-next-btn">–î–∞–ª–µ–µ</button>
            </div>

            <div id="generation-progress" class="hidden">
                <div id="progress-status"></div>
                <div class="progress-bar-container">
                    <div id="progress-bar"></div>
                </div>
                <div id="progress-details"></div>
                <button class="primary-button hidden" id="finish-setup-btn">–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é</button>
            </div>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π —ç–∫—Ä–∞–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π -->
    <div class="screen hidden" id="main-screen">
        <header class="main-header">
            <span id="main-header-title">–ú–µ–Ω—é –Ω–∞ –Ω–µ–¥–µ–ª—é</span>
            <div id="sync-status-indicator" title="–°—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏"></div>
        </header>
        <div class="content-area">
            <div class="main-content active" id="menu-content">
                <div class="day-scroller" id="day-scroller-container"></div>
            </div>
            <div class="main-content" id="shopping-list-content">
                <p id="shopping-progress-text">0/0 –∫—É–ø–ª–µ–Ω–æ</p>
                <div class="progress-bar-shopping">
                    <div id="shopping-progress"></div>
                </div>
                <div id="shopping-list-container"></div>
                <div class="shopping-list-footer">
                  <div id="shopping-list-total"><span>–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—É–º–º–∞:</span> 0 ‚ÇΩ</div>
                  <button class="secondary-button" id="ask-to-buy-btn">üôã‚Äç‚ôÇÔ∏è –ü–æ–ø—Ä–æ—Å–∏—Ç—å –∫—É–ø–∏—Ç—å</button>
                </div>
            </div>
            <div class="main-content" id="budget-content">
                <div class="budget-container">
                    <div class="pie-chart-container">
                        <svg class="pie-chart" viewBox="0 0 36 36">
                          <circle cx="18" cy="18" r="15.9155" stroke="#eee" stroke-width="32" fill="#fff"/>
                          <circle class="pie-slice" id="pie-products" cx="18" cy="18" r="15.9155" stroke="#8B5E3C" stroke-dasharray="0, 100"/>
                        </svg>
                        <div class="chart-center-text" id="budget-spent-total">0 ‚ÇΩ <span>–ø–æ—Ç—Ä–∞—á–µ–Ω–æ</span></div>
                    </div>
                    <div class="budget-summary">
                        <p>–ë—é–¥–∂–µ—Ç: <span class="amount" id="budget-total">10000 ‚ÇΩ</span></p>
                        <p>–û—Å—Ç–∞–ª–æ—Å—å: <span class="amount ok" id="budget-remaining">10000 ‚ÇΩ</span></p>
                    </div>
                </div>
            </div>
            <div class="main-content" id="settings-content">
                <div class="settings-section">
                    <h3 class="settings-title">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ–Ω—é</h3>
                    <div class="settings-form-group">
                        <label for="settings-menu-duration">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –º–µ–Ω—é</label>
                        <input type="number" id="settings-menu-duration" class="settings-input" min="1" max="14">
                    </div>
                    <div class="settings-form-group">
                        <label for="settings-total-budget">–û–±—â–∏–π –±—é–¥–∂–µ—Ç, ‚ÇΩ</label>
                        <input type="number" id="settings-total-budget" class="settings-input" step="500">
                    </div>
                    <div class="settings-form-group">
                        <label for="settings-cuisine">–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º–∞—è –∫—É—Ö–Ω—è</label>
                        <select id="settings-cuisine" class="settings-select">
                            <option value="–õ—é–±–∞—è">–õ—é–±–∞—è</option>
                            <option value="–†—É—Å—Å–∫–∞—è">–†—É—Å—Å–∫–∞—è</option>
                            <option value="–ò—Ç–∞–ª—å—è–Ω—Å–∫–∞—è">–ò—Ç–∞–ª—å—è–Ω—Å–∫–∞—è</option>
                            <option value="–ê–∑–∏–∞—Ç—Å–∫–∞—è">–ê–∑–∏–∞—Ç—Å–∫–∞—è</option>
                            <option value="–°—Ä–µ–¥–∏–∑–µ–º–Ω–æ–º–æ—Ä—Å–∫–∞—è">–°—Ä–µ–¥–∏–∑–µ–º–Ω–æ–º–æ—Ä—Å–∫–∞—è</option>
                            <option value="–ö–∞–≤–∫–∞–∑—Å–∫–∞—è">–ö–∞–≤–∫–∞–∑—Å–∫–∞—è</option>
                        </select>
                    </div>
                     <div class="settings-form-group">
                        <label for="settings-difficulty">–°–ª–æ–∂–Ω–æ—Å—Ç—å –±–ª—é–¥</label>
                        <select id="settings-difficulty" class="settings-select">
                            <option value="–õ—é–±–∞—è">–õ—é–±–∞—è</option>
                            <option value="–ü—Ä–æ—Å—Ç–∞—è">–ü—Ä–æ—Å—Ç–∞—è (–±—ã—Å—Ç—Ä–æ –∏ –ª–µ–≥–∫–æ)</option>
                            <option value="–°—Ä–µ–¥–Ω—è—è">–°—Ä–µ–¥–Ω—è—è (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã)</option>
                            <option value="–°–ª–æ–∂–Ω–∞—è">–°–ª–æ–∂–Ω–∞—è (–¥–ª—è –æ—Å–æ–±—ã—Ö —Å–ª—É—á–∞–µ–≤)</option>
                        </select>
                    </div>
                    <div class="settings-form-group">
                        <label for="settings-preferences">–ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –∏ –∞–ª–ª–µ—Ä–≥–∏–∏</label>
                        <textarea id="settings-preferences" class="settings-textarea" rows="3" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –±–µ–∑ —Ä—ã–±—ã, –º–µ–Ω—å—à–µ –∂–∞—Ä–µ–Ω–æ–≥–æ"></textarea>
                    </div>
                    <button class="primary-button" id="save-settings-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                </div>

                <div class="settings-section">
                    <h3 class="settings-title">–°–æ—Å—Ç–∞–≤ —Å–µ–º—å–∏</h3>
                    <div id="family-members-container"></div>
                    <button class="secondary-button" id="add-family-member-btn" style="height: 45px; font-size: 16px;">+ –î–æ–±–∞–≤–∏—Ç—å —á–ª–µ–Ω–∞ —Å–µ–º—å–∏</button>
                </div>
                
                 <div class="settings-section">
                    <h3 class="settings-title">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</h3>
                    <div class="settings-form-group">
                        <label for="settings-jsonbin-api-key">JSONBin.io X-Master-Key</label>
                        <input type="password" id="settings-jsonbin-api-key" class="settings-input" placeholder="–ö–ª—é—á –¥–æ—Å—Ç—É–ø–∞ –∫ —Ö—Ä–∞–Ω–∏–ª–∏—â—É">
                    </div>
                    <div class="settings-form-group">
                        <label for="settings-jsonbin-bin-id">JSONBin.io Bin ID</label>
                        <input type="text" id="settings-jsonbin-bin-id" class="settings-input" placeholder="–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ">
                    </div>
                    <button class="primary-button" id="save-sync-settings-btn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <a href="#" id="jsonbin-help-link-settings" class="api-key-help-link" style="margin-top: 15px;">–ì–¥–µ –≤–∑—è—Ç—å —ç—Ç–∏ –∫–ª—é—á–∏?</a>
                </div>

                <div class="settings-section">
                    <h3 class="settings-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏</h3>
                    <button class="secondary-button" id="share-qr-btn">üì≤ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ QR</button>
                    <button class="secondary-button" id="scan-qr-from-settings-btn" style="margin-top: 10px;">üì∑ –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR</button>
                    <button class="primary-button" id="export-btn" style="margin-top: 10px;">üì§ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Ñ–∞–π–ª</button>
                    <input type="file" id="import-file-input" class="hidden" accept=".json">
                    <button class="primary-button" id="import-btn" style="margin-top: 10px;">üì• –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ —Ñ–∞–π–ª–∞</button>
                     <button class="secondary-button" id="run-wizard-btn" style="margin-top: 20px; height: 45px; font-size: 16px;">–ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∞—Å—Ç–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                    <button class="primary-button" id="regenerate-all-btn" style="margin-top: 10px;">üîÑ –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë –º–µ–Ω—é</button>
                </div>
                
                 <div class="settings-section">
                    <h3 class="settings-title">API-–∫–ª—é—á</h3>
                    <div class="settings-form-group">
                        <label for="settings-api-key">Google Gemini API Key</label>
                        <input type="password" id="settings-api-key" class="settings-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∫–ª—é—á">
                    </div>
                    <button class="primary-button" id="save-api-key-btn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>


                <div class="settings-section">
                    <h3 class="settings-title">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ PWA</h3>
                     <button class="secondary-button" id="enable-notifications-btn" style="margin-top: 10px;">üîî –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</button>
                    <div class="install-instructions" style="margin-top: 15px;">
                        <span class="install-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 17.5V3M7.5 7.5L12 3l4.5 4.5M18 13.5v5.25c0 .93-.75 1.68-1.68 1.68H7.68c-.93 0-1.68-.75-1.68-1.68v-5.25"/></svg>
                        </span>
                        <div class="install-text">–ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è" –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –∞ –∑–∞—Ç–µ–º –≤—ã–±–µ—Ä–∏—Ç–µ "–ù–∞ —ç–∫—Ä–∞–Ω '–î–æ–º–æ–π'", —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–∞–∫ –Ω–∞—Ç–∏–≤–Ω–æ–µ.</div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3 class="settings-title">–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</h3>
                    <p id="app-version-info" style="color: var(--soft-text); font-size: 14px; margin-bottom: 15px; cursor: pointer;"></p>
                    <button class="secondary-button" id="show-changelog-btn" style="height: 45px; font-size: 16px;">–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π</button>
                    <div class="sync-info" style="margin-top: 15px;">
                        –ê–≤—Ç–æ—Ä: –ö–ª–∏–º–æ–≤ –ï–≤–≥–µ–Ω–∏–π<br>
                        <a href="https://t.me/eklimov" target="_blank">–°–≤—è–∑–∞—Ç—å—Å—è –≤ Telegram</a>
                    </div>
                </div>
                
                <div class="settings-section hidden" id="admin-panel">
                    <h3 class="settings-title" style="color: var(--danger-color);">–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
                    <div class="settings-form-group">
                        <label for="admin-bin-id">–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ Bin ID</label>
                        <input type="text" id="admin-bin-id" class="settings-input" placeholder="–í–≤–µ–¥–∏—Ç–µ Bin ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
                    </div>
                    <button class="primary-button" id="admin-load-bin-btn">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                    <div class="settings-form-group" style="margin-top:20px;">
                        <label for="admin-delete-bin-id">–£–¥–∞–ª–∏—Ç—å Bin ID</label>
                        <input type="text" id="admin-delete-bin-id" class="settings-input" placeholder="–í–≤–µ–¥–∏—Ç–µ Bin ID –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è">
                    </div>
                    <button class="danger-button" id="admin-delete-bin-btn">–£–î–ê–õ–ò–¢–¨ –ë–ï–ó–í–û–ó–í–†–ê–¢–ù–û</button>
                    <p class="sync-info" style="margin-top: 15px; font-size: 12px; color: var(--warning-color);"><b>–í–Ω–∏–º–∞–Ω–∏–µ:</b> –î–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —É–¥–∞–ª–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–∞—à X-Master-Key –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏. –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ.</p>
                </div>
            </div>
        </div>
        <nav class="bottom-nav">
            <button class="nav-button active" data-content="menu-content" data-title="–ú–µ–Ω—é –Ω–∞ –Ω–µ–¥–µ–ª—é">
                <svg viewBox="0 0 24 24"><path d="M10.5 3.5L3 11c-1.3 1.3-1.3 3.4 0 4.7l7.5 7.5c1.3 1.3 3.4 1.3 4.7 0l7.5-7.5c1.3-1.3 1.3-3.4 0-4.7L15.2 3.5c-1.3-1.3-3.4-1.3-4.7 0zM14 19l-4-4 4-4"/></svg>
                –ú–µ–Ω—é
            </button>
            <button class="nav-button" data-content="shopping-list-content" data-title="–°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫">
                <svg viewBox="0 0 24 24"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/></svg>
                –ü–æ–∫—É–ø–∫–∏
            </button>
            <button class="nav-button" data-content="budget-content" data-title="–ë—é–¥–∂–µ—Ç">
                 <svg viewBox="0 0 24 24"><path d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"/></svg>
                –ë—é–¥–∂–µ—Ç
            </button>
            <button class="nav-button" data-content="settings-content" data-title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
                <svg viewBox="0 0 24 24"><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49.42l-.38-2.65c.61-.25 1.17-.59 1.69.98l2.49 1c.23.09.49 0 .61.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"/></svg>
                –ù–∞—Å—Ç—Ä–æ–π–∫–∏
            </button>
        </nav>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Ä–µ—Ü–µ–ø—Ç–∞ -->
    <div class="screen hidden" id="recipe-screen">
        <header class="recipe-header">
            <button class="back-button" id="back-to-menu-btn">‚óÄÔ∏é –ù–∞–∑–∞–¥</button>
            <h2 id="recipe-title"></h2>
            <span id="step-indicator"></span>
        </header>
        <div id="recipe-content">
            <img id="step-image" src="" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —à–∞–≥–∞">
            <p id="step-description"></p>
            <div class="timer-container hidden" id="timer-section">
                <div id="timer-display">00:00</div>
                <div class="timer-controls">
                    <button class="timer-button" id="start-timer-btn">‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
                    <button class="timer-button" id="pause-timer-btn">‚è∏Ô∏è –ü–∞—É–∑–∞</button>
                    <button class="timer-button" id="reset-timer-btn">‚ôªÔ∏è –°–±—Ä–æ—Å</button>
                </div>
            </div>
            <h3 id="step-ingredients-title">–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –Ω–∞ —ç—Ç–æ–º —à–∞–≥–µ:</h3>
            <ul id="step-ingredients"></ul>
            <div class="recipe-nav">
                <button class="nav-btn-recipe" id="prev-step-btn">‚Üê –ù–∞–∑–∞–¥</button>
                <button class="nav-btn-recipe" id="next-step-btn">–î–∞–ª–µ–µ ‚Üí</button>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
    <div id="modal-overlay">
        <div class="modal-content">
            <h3 class="modal-title" id="modal-title"></h3>
            <div class="modal-body" id="modal-body"></div>
            <div class="modal-buttons" id="modal-buttons"></div>
        </div>
    </div>

    <!-- QR Scanner -->
    <div id="qr-scanner-overlay" class="hidden">
        <video id="qr-video" playsinline></video>
        <canvas id="qr-canvas"></canvas>
        <p style="margin-top: 20px;">–ù–∞–≤–µ–¥–∏—Ç–µ –∫–∞–º–µ—Ä—É –Ω–∞ QR-–∫–æ–¥</p>
        <button id="cancel-scan-btn" class="secondary-button" style="width: 80%; max-width: 300px; margin-top: 20px;">–û—Ç–º–µ–Ω–∞</button>
    </div>
    
    <!-- –ö–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ -->
    <div id="dev-console">
        <div id="log-output"></div>
        <input type="text" id="command-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É...">
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
    <div id="notification"></div>
</div>

<audio id="notification-sound" src="data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YU9vT18="></audio>

<script type="module" src="script.js"></script>
</body>
</html>