import{i as K,g as U,a as $,j as e,G as W,s as J,r as c,F as L,b as E,c as H,d as _,e as q,f as R,h as w,k as V,l as Q,m as X,n as Y,o as B,u as A,p as Z,q as ee,R as se,t as te}from"./vendor-D_6u3BOS.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const d of t.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function j(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(n){if(n.ep)return;n.ep=!0;const t=j(n);fetch(n.href,t)}})();const ne={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},z=K(ne),y=U(z),C=$(z),ae=({setScreen:a})=>e.jsxs("div",{className:"screen",id:"splash-screen",children:[e.jsxs("svg",{className:"splash-logo",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"#F0E7DD"}),e.jsx("path",{d:"M50,10 A40,40 0 0,1 90,50",fill:"none",stroke:"#8B5E3C",strokeWidth:"8"}),e.jsx("path",{d:"M50,90 A40,40 0 0,1 10,50",fill:"none",stroke:"#D4A373",strokeWidth:"8"}),e.jsx("circle",{cx:"50",cy:"50",r:"20",fill:"#fff"}),e.jsx("path",{d:"M50 38 C 55 42, 55 48, 50 52 S 45 58, 50 62",stroke:"#5E7A6E",strokeWidth:"4",fill:"none",strokeLinecap:"round"})]}),e.jsx("h1",{className:"splash-title",children:"–°–ï–ú–ï–ô–ù–û–ï –ú–ï–ù–Æ"}),e.jsxs("div",{className:"splash-features",children:[e.jsxs("div",{className:"feature-slide",children:[e.jsx("div",{className:"feature-icon",children:"üóìÔ∏è"}),e.jsx("div",{className:"feature-text",children:"–ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ –º–µ–Ω—é –Ω–∞ –Ω–µ–¥–µ–ª—é"})]}),e.jsxs("div",{className:"feature-slide",children:[e.jsx("div",{className:"feature-icon",children:"üõí"}),e.jsx("div",{className:"feature-text",children:"–°–æ—Å—Ç–∞–≤–ª—è–π—Ç–µ —É–º–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫"})]}),e.jsxs("div",{className:"feature-slide",children:[e.jsx("div",{className:"feature-icon",children:"üë©‚Äçüç≥"}),e.jsx("div",{className:"feature-text",children:"–ì–æ—Ç–æ–≤—å—Ç–µ –ª–µ–≥–∫–æ –ø–æ —à–∞–≥–∞–º"})]})]}),e.jsxs("div",{className:"splash-author",children:["–ê–≤—Ç–æ—Ä: –ö–ª–∏–º–æ–≤ –ï–≤–≥–µ–Ω–∏–π",e.jsx("br",{}),e.jsx("a",{href:"https://t.me/eklimov",target:"_blank",rel:"noopener noreferrer",children:"Telegram: @eklimov"})]})]}),M=({setScreen:a})=>{const s=async()=>{const j=new W;try{await J(y,j)}catch(i){console.error("–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ Google:",i)}};return e.jsx("div",{className:"screen",id:"welcome-screen",children:e.jsxs("div",{className:"setup-container",children:[e.jsxs("svg",{className:"setup-logo",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"#F0E7DD"}),e.jsx("path",{d:"M50,10 A40,40 0 0,1 90,50",fill:"none",stroke:"#8B5E3C",strokeWidth:"8"}),e.jsx("path",{d:"M50,90 A40,40 0 0,1 10,50",fill:"none",stroke:"#D4A373",strokeWidth:"8"}),e.jsx("circle",{cx:"50",cy:"50",r:"20",fill:"#fff"}),e.jsx("path",{d:"M50 38 C 55 42, 55 48, 50 52 S 45 58, 50 62",stroke:"#5E7A6E",strokeWidth:"4",fill:"none",strokeLinecap:"round"})]}),e.jsx("h1",{className:"setup-title",children:"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!"}),e.jsx("p",{className:"setup-subtitle",children:"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à–µ –º–µ–Ω—é –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏."}),e.jsx("div",{className:"welcome-buttons",children:e.jsxs("button",{className:"primary-button",id:"google-signin-btn",onClick:s,children:[e.jsxs("svg",{style:{width:"20px",height:"20px",verticalAlign:"middle",marginRight:"10px"},viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"white",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#4A90E2",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"}),e.jsx("path",{fill:"#FBBC05",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"}),e.jsx("path",{fill:"none",d:"M1 1h22v22H1z"})]}),"–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google"]})}),e.jsx("p",{className:"welcome-info",children:"–í—Ö–æ–¥ –ø–æ–∑–≤–æ–ª–∏—Ç –≤–∞–º –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –æ–±–ª–∞–∫–µ."})]})})},F=()=>({id:new Date().toISOString(),name:"",age:30,weight:70,height:170,gender:"male",activityLevel:"moderate",goal:"maintain"}),ie=({member:a,onSave:s,onClose:j})=>{const[i,n]=c.useState(a||F()),[t,d]=c.useState(1),o=6;c.useEffect(()=>{n(a||F()),d(1)},[a]);const p=u=>{const{name:h,value:v}=u.target;n(N=>({...N,[h]:h==="age"||h==="weight"||h==="height"?parseInt(v):v}))},g=()=>{t<o&&d(u=>u+1)},x=()=>{t>1&&d(u=>u-1)},l=()=>{if(i.name.trim()===""){alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è —á–ª–µ–Ω–∞ —Å–µ–º—å–∏.");return}s(i)},m=()=>{switch(t){case 1:return e.jsxs("div",{className:"modal-form-group",children:[e.jsx("label",{children:"–ò–º—è"}),e.jsx("input",{type:"text",name:"name",value:i.name,onChange:p,placeholder:"–ò–º—è"})]});case 2:return e.jsxs("div",{className:"modal-form-group",children:[e.jsx("label",{children:"–í–æ–∑—Ä–∞—Å—Ç"}),e.jsx("input",{type:"number",name:"age",value:i.age,onChange:p,placeholder:"–í–æ–∑—Ä–∞—Å—Ç"})]});case 3:return e.jsxs("div",{className:"modal-form-group",children:[e.jsx("label",{children:"–í–µ—Å (–∫–≥)"}),e.jsx("input",{type:"number",name:"weight",value:i.weight,onChange:p,placeholder:"–í–µ—Å"})]});case 4:return e.jsxs("div",{className:"modal-form-group",children:[e.jsx("label",{children:"–†–æ—Å—Ç (—Å–º)"}),e.jsx("input",{type:"number",name:"height",value:i.height,onChange:p,placeholder:"–†–æ—Å—Ç"})]});case 5:return e.jsxs("div",{className:"modal-form-group",children:[e.jsx("label",{children:"–ü–æ–ª"}),e.jsxs("select",{name:"gender",value:i.gender,onChange:p,children:[e.jsx("option",{value:"male",children:"–ú—É–∂—Å–∫–æ–π"}),e.jsx("option",{value:"female",children:"–ñ–µ–Ω—Å–∫–∏–π"})]})]});case 6:return e.jsxs("div",{className:"modal-form-group",children:[e.jsx("label",{children:"–£—Ä–æ–≤–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏"}),e.jsxs("select",{name:"activityLevel",value:i.activityLevel,onChange:p,children:[e.jsx("option",{value:"sedentary",children:"–°–∏–¥—è—á–∏–π (–º–∞–ª–æ –∏–ª–∏ –Ω–µ—Ç —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π)"}),e.jsx("option",{value:"light",children:"–õ–µ–≥–∫–∞—è (–ª–µ–≥–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è/—Å–ø–æ—Ä—Ç 1-3 –¥–Ω—è –≤ –Ω–µ–¥–µ–ª—é)"}),e.jsx("option",{value:"moderate",children:"–£–º–µ—Ä–µ–Ω–Ω–∞—è (—É–º–µ—Ä–µ–Ω–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è/—Å–ø–æ—Ä—Ç 3-5 –¥–Ω–µ–π –≤ –Ω–µ–¥–µ–ª—é)"}),e.jsx("option",{value:"active",children:"–í—ã—Å–æ–∫–∞—è (–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è/—Å–ø–æ—Ä—Ç 6-7 –¥–Ω–µ–π –≤ –Ω–µ–¥–µ–ª—é)"}),e.jsx("option",{value:"very_active",children:"–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è (–æ—á–µ–Ω—å –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è/—Ñ–∏–∑–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞)"})]}),e.jsx("label",{children:"–¶–µ–ª—å"}),e.jsxs("select",{name:"goal",value:i.goal,onChange:p,children:[e.jsx("option",{value:"lose",children:"–°–Ω–∏–∂–µ–Ω–∏–µ –≤–µ—Å–∞"}),e.jsx("option",{value:"maintain",children:"–ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –≤–µ—Å–∞"}),e.jsx("option",{value:"gain",children:"–ù–∞–±–æ—Ä –º–∞—Å—Å—ã"})]})]});default:return null}};return e.jsx("div",{className:"modal-overlay visible",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("h2",{className:"modal-title",children:[a?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å":"–î–æ–±–∞–≤–∏—Ç—å"," —á–ª–µ–Ω–∞ —Å–µ–º—å–∏"]}),e.jsxs("p",{className:"wizard-step-counter",children:["–®–∞–≥ ",t," –∏–∑ ",o]}),e.jsx("div",{className:"modal-body",children:m()}),e.jsxs("div",{className:"modal-buttons",children:[t>1&&e.jsxs("button",{className:"secondary-button",onClick:x,children:[e.jsx(L,{})," –ù–∞–∑–∞–¥"]}),t<o?e.jsxs("button",{className:"primary-button",onClick:g,children:["–î–∞–ª–µ–µ ",e.jsx(E,{})]}):e.jsx("button",{className:"primary-button",onClick:l,children:"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"}),e.jsx("button",{className:"secondary-button",onClick:j,children:"–û—Ç–º–µ–Ω–∞"})]})]})})},re=({setScreen:a})=>{const{appState:s,setAppState:j,user:i}=k(),[n,t]=c.useState(1),[d,o]=c.useState(!1),[p,g]=c.useState(null),[x,l]=c.useState(s==null?void 0:s.settings);if(!x)return e.jsx("div",{children:"–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫..."});const m=()=>t(r=>r+1),u=()=>t(r=>r-1),h=()=>{g(null),o(!0)},v=r=>{g(r),o(!0)},N=r=>{l(p?f=>({...f,family:f.family.map(b=>b.id===r.id?r:b)}):f=>({...f,family:[...f.family,r]})),o(!1),g(null)},O=r=>{l(f=>({...f,family:f.family.filter(b=>b.id!==r)}))},S=r=>{const{name:f,value:b}=r.target;l(G=>({...G,[f]:b}))},P=async()=>{if(i&&s){const r={...s,settings:x};j(r),await R(w(C,"user-data",i.uid),r),a("main")}},T=()=>{switch(n){case 1:return e.jsxs("div",{children:[e.jsx("h2",{className:"wizard-step-title",children:"–®–∞–≥ 1: –í–∞—à–∞ —Å–µ–º—å—è"}),e.jsx("p",{className:"wizard-step-description",children:"–î–æ–±–∞–≤—å—Ç–µ —á–ª–µ–Ω–æ–≤ —Å–µ–º—å–∏, —á—Ç–æ–±—ã –ò–ò –º–æ–≥ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –≤ –ø–∏—Ç–∞–Ω–∏–∏."}),x.family.map((r,f)=>e.jsxs("div",{className:"family-member-card-wizard",children:[e.jsx(FaUser,{className:"family-member-icon"}),e.jsxs("div",{className:"family-member-info",children:[e.jsxs("span",{children:[r.name," (",r.age," –ª–µ—Ç)"]}),e.jsxs("span",{className:"family-member-details",children:[r.weight,"–∫–≥, ",r.height,"—Å–º, ",r.gender==="male"?"–ú":"–ñ"]})]}),e.jsxs("div",{className:"family-member-actions",children:[e.jsx("button",{onClick:()=>v(r),className:"edit-member-btn",children:e.jsx(H,{})}),e.jsx("button",{onClick:()=>O(r.id),className:"remove-member-btn",children:e.jsx(_,{})})]})]},r.id)),e.jsxs("button",{onClick:h,className:"add-member-btn",children:[e.jsx(q,{})," –î–æ–±–∞–≤–∏—Ç—å —á–ª–µ–Ω–∞ —Å–µ–º—å–∏"]})]});case 2:return e.jsxs("div",{children:[e.jsx("h2",{className:"wizard-step-title",children:"–®–∞–≥ 2: –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –∏ –±—é–¥–∂–µ—Ç"}),e.jsxs("div",{className:"settings-form-group",children:[e.jsx("label",{children:"–û–±—â–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è"}),e.jsx("textarea",{name:"preferences",value:x.preferences,onChange:S,rows:3,placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: –ª—é–±–∏–º –∏—Ç–∞–ª—å—è–Ω—Å–∫—É—é –∫—É—Ö–Ω—é, –Ω–µ–∂–∏—Ä–Ω–æ–µ –º—è—Å–æ..."})]}),e.jsxs("div",{className:"settings-form-group",children:[e.jsx("label",{children:"–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º–∞—è –∫—É—Ö–Ω—è"}),e.jsx("input",{type:"text",name:"cuisine",value:x.cuisine,onChange:S,placeholder:"–õ—é–±–∞—è, –ò—Ç–∞–ª—å—è–Ω—Å–∫–∞—è, –ê–∑–∏–∞—Ç—Å–∫–∞—è..."})]}),e.jsxs("div",{className:"settings-form-group",children:[e.jsx("label",{children:"–ñ–µ–ª–∞–µ–º–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –±–ª—é–¥"}),e.jsx("input",{type:"text",name:"difficulty",value:x.difficulty,onChange:S,placeholder:"–õ—é–±–∞—è, –ü—Ä–æ—Å—Ç–∞—è, –°—Ä–µ–¥–Ω—è—è..."})]}),e.jsxs("div",{className:"settings-form-group",children:[e.jsx("label",{children:"–ë—é–¥–∂–µ—Ç –Ω–∞ –Ω–µ–¥–µ–ª—é, ‚ÇΩ"}),e.jsx("input",{type:"number",name:"totalBudget",value:x.totalBudget,onChange:S})]})]});case 3:return e.jsxs("div",{children:[e.jsx("h2",{className:"wizard-step-title",children:"–®–∞–≥ 3: API –ö–ª—é—á"}),e.jsx("p",{className:"wizard-step-description",children:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à API-–∫–ª—é—á –æ—Ç Google AI Studio. –û–Ω –Ω—É–∂–µ–Ω –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–µ–Ω—é."}),e.jsxs("div",{className:"settings-form-group",children:[e.jsx("label",{children:"Google Gemini API Key"}),e.jsx("input",{type:"password",name:"apiKey",value:x.apiKey||"",onChange:S,placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∫–ª—é—á"}),e.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"api-key-help-link",children:"–ì–¥–µ –≤–∑—è—Ç—å –∫–ª—é—á?"})]})]});default:return null}};return e.jsxs("div",{className:"screen",id:"setup-screen",children:[e.jsxs("div",{className:"setup-container",children:[e.jsx("h1",{className:"setup-title",children:"–ú–∞—Å—Ç–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"}),e.jsxs("p",{className:"wizard-step-counter",children:["–®–∞–≥ ",n," –∏–∑ 3"]}),e.jsx("div",{id:"setup-wizard",children:T()}),e.jsxs("div",{id:"wizard-nav",children:[n>1&&e.jsxs("button",{onClick:u,className:"secondary-button",children:[e.jsx(L,{})," –ù–∞–∑–∞–¥"]}),n<3?e.jsxs("button",{onClick:m,className:"primary-button",children:["–î–∞–ª–µ–µ ",e.jsx(E,{})]}):e.jsx("button",{onClick:P,className:"primary-button",children:"–ó–∞–≤–µ—Ä—à–∏—Ç—å"})]})]}),d&&e.jsx(ie,{member:p,onSave:N,onClose:()=>o(!1)})]})},le=()=>{const{appState:a}=k();return!a||a.menu.length===0?e.jsx("div",{children:"–ú–µ–Ω—é –Ω–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ."}):e.jsxs("div",{children:[e.jsx("h2",{children:"–ú–µ–Ω—é –Ω–∞ –Ω–µ–¥–µ–ª—é"}),e.jsx("pre",{children:JSON.stringify(a.menu,null,2)})]})},ce=()=>{const{appState:a}=k();return!a||a.shoppingList.length===0?e.jsx("div",{children:"–°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫ –ø—É—Å—Ç."}):e.jsxs("div",{children:[e.jsx("h2",{children:"–°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫"}),e.jsx("pre",{children:JSON.stringify(a.shoppingList,null,2)})]})},oe=()=>{const{appState:a}=k();return a?e.jsxs("div",{children:[e.jsx("h2",{children:"–ë—é–¥–∂–µ—Ç"}),e.jsx("pre",{children:JSON.stringify(a.settings.totalBudget,null,2)})]}):e.jsx("div",{children:"–ë—é–¥–∂–µ—Ç –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω."})},de=({setScreen:a})=>{const{appState:s,setAppState:j,user:i,showNotification:n}=k(),[t,d]=c.useState("menu"),[o,p]=c.useState(!1),g=async()=>{if(!(s!=null&&s.settings.apiKey)){n("API –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö.","error"),a("settings");return}p(!0),n("–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –º–µ–Ω—é...","loading");try{const m=`–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –º–µ–Ω—é –Ω–∞ ${s.settings.menuDuration} –¥–Ω–µ–π –¥–ª—è —Å–µ–º—å–∏: ${JSON.stringify(s.settings.family)}. –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è: ${s.settings.preferences}. –ë—é–¥–∂–µ—Ç: ${s.settings.totalBudget}. –ö—É—Ö–Ω—è: ${s.settings.cuisine}. –°–ª–æ–∂–Ω–æ—Å—Ç—å: ${s.settings.difficulty}.`,u=await generateContent(m),h=JSON.parse(u);if(h.error)throw new Error(h.error);const v={...s,menu:h.menu||[],recipes:h.recipes||{},shoppingList:h.shoppingList||[],timestamp:Date.now()};j(v),i&&await R(w(C,"user-data",i.uid),v),n("–ú–µ–Ω—é —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ!","success")}catch(m){console.error("–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–µ–Ω—é:",m),n(`–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–µ–Ω—é: ${m.message||m}`,"error")}finally{p(!1)}},x=()=>{switch(t){case"menu":return e.jsx(le,{});case"shopping":return e.jsx(ce,{});case"budget":return e.jsx(oe,{});default:return null}},l=()=>{switch(t){case"menu":return"–ú–µ–Ω—é –Ω–∞ –Ω–µ–¥–µ–ª—é";case"shopping":return"–°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫";case"budget":return"–ë—é–¥–∂–µ—Ç";default:return"–°–µ–º–µ–π–Ω–æ–µ –º–µ–Ω—é"}};return e.jsxs("div",{className:"screen",id:"main-screen",children:[e.jsxs("header",{className:"main-header",children:[e.jsx("h1",{id:"main-header-title",children:l()}),e.jsx("button",{id:"open-settings-btn",onClick:()=>a("settings"),children:i!=null&&i.photoURL?e.jsx("img",{src:i.photoURL,alt:"User settings",className:"header-avatar"}):e.jsx(V,{})})]}),e.jsx("div",{className:"content-area",children:(s==null?void 0:s.menu.length)===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("h2",{children:"–ú–µ–Ω—é –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω–æ"}),e.jsx("p",{children:"–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —á—Ç–æ–±—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à–µ –ø–µ—Ä–≤–æ–µ –º–µ–Ω—é."}),e.jsx("button",{className:"primary-button",onClick:g,disabled:o,children:o?"–ì–µ–Ω–µ—Ä–∞—Ü–∏—è...":"‚ú® –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–µ–Ω—é —Å –ø–æ–º–æ—â—å—é AI"})]}):x()}),e.jsxs("nav",{className:"bottom-nav",children:[e.jsxs("button",{className:`nav-button ${t==="menu"?"active":""}`,onClick:()=>d("menu"),children:[e.jsx(Q,{}),e.jsx("span",{children:"–ú–µ–Ω—é"})]}),e.jsxs("button",{className:`nav-button ${t==="shopping"?"active":""}`,onClick:()=>d("shopping"),children:[e.jsx(X,{}),e.jsx("span",{children:"–ü–æ–∫—É–ø–∫–∏"})]}),e.jsxs("button",{className:`nav-button ${t==="budget"?"active":""}`,onClick:()=>d("budget"),children:[e.jsx(Y,{}),e.jsx("span",{children:"–ë—é–¥–∂–µ—Ç"})]})]})]})},ue=({setScreen:a})=>{const[s,j]=c.useState(null),[i,n]=c.useState(!0),[t,d]=c.useState(!1);c.useEffect(()=>{(async()=>{if(y.currentUser){n(!0);const m=w(C,"users",y.currentUser.uid),u=await B(m);u.exists()&&j(u.data()),n(!1)}})()},[]);const o=l=>{const{name:m,value:u}=l.target;j(h=>({...h,[m]:u}))},p=async()=>{if(y.currentUser){d(!0);try{const l=w(C,"users",y.currentUser.uid);await A(l,s),alert("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!")}catch(l){console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:",l),alert("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.")}finally{d(!1)}}},g=async()=>{try{await Z(y)}catch(l){console.error("–û—à–∏–±–∫–∞ –≤—ã—Ö–æ–¥–∞:",l)}},x=async()=>{if(y.currentUser&&window.confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ?"))try{const l=w(C,"users",y.currentUser.uid);await A(l,{setupComplete:!1}),a("setup")}catch(l){console.error("–û—à–∏–±–∫–∞ —Å–±—Ä–æ—Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫:",l)}};return i?e.jsx("div",{className:"screen",children:"–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫..."}):s?e.jsxs("div",{className:"screen active",id:"settings-screen",children:[e.jsxs("header",{className:"recipe-header",children:[e.jsx("button",{className:"back-button",onClick:()=>a("main"),children:"‚Üê –ù–∞–∑–∞–¥"}),e.jsx("h2",{id:"settings-title",children:"–ù–∞—Å—Ç—Ä–æ–π–∫–∏"})]}),e.jsxs("div",{id:"settings-content",children:[e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{className:"settings-title",children:"–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"}),e.jsxs("div",{className:"settings-form-group",children:[e.jsx("label",{htmlFor:"apiKey",children:"Google Gemini API –ö–ª—é—á"}),e.jsx("input",{type:"password",id:"apiKey",name:"apiKey",value:s.apiKey,onChange:o})]}),e.jsxs("div",{className:"settings-form-group",children:[e.jsx("label",{htmlFor:"familyName",children:"–ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ–º—å–∏"}),e.jsx("input",{type:"text",id:"familyName",name:"familyName",value:s.familyName,onChange:o})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{className:"settings-title",children:"–ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è"}),e.jsxs("div",{className:"settings-form-group",children:[e.jsx("label",{htmlFor:"preferences",children:"–û–±—â–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è"}),e.jsx("textarea",{id:"preferences",name:"preferences",value:s.preferences,onChange:o,rows:3})]}),e.jsxs("div",{className:"settings-form-group",children:[e.jsx("label",{htmlFor:"dietaryRestrictions",children:"–î–∏–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è"}),e.jsx("textarea",{id:"dietaryRestrictions",name:"dietaryRestrictions",value:s.dietaryRestrictions,onChange:o,rows:3})]}),e.jsxs("div",{className:"settings-form-group",children:[e.jsx("label",{htmlFor:"kitchenAppliances",children:"–ö—É—Ö–æ–Ω–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞"}),e.jsx("textarea",{id:"kitchenAppliances",name:"kitchenAppliances",value:s.kitchenAppliances,onChange:o,rows:3})]})]}),e.jsx("button",{onClick:p,className:"primary-button",disabled:t,children:t?"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...":"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"}),e.jsxs("div",{className:"settings-section",style:{marginTop:"20px"},children:[e.jsx("h3",{className:"settings-title",style:{color:"var(--danger-color)"},children:"–û–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞"}),e.jsx("button",{onClick:g,className:"secondary-button",style:{marginBottom:"10px"},children:"–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞"}),e.jsx("button",{onClick:x,className:"danger-button",children:"–°–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ"})]})]})]}):e.jsx("div",{className:"screen",children:"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏."})},I=c.createContext(null),k=()=>c.useContext(I),he=()=>({settings:{apiKey:null,family:[],preferences:"–ë–µ–∑ —Ä—ã–±—ã, –±–µ–∑ –≥—Ä–∏–±–æ–≤",menuDuration:7,totalBudget:15e3,cuisine:"–õ—é–±–∞—è",difficulty:"–õ—é–±–∞—è"},menu:[],recipes:{},shoppingList:[],cookedMeals:{},timestamp:null}),me=()=>{const[a,s]=c.useState("splash"),[j,i]=c.useState(null),[n,t]=c.useState(null),[d,o]=c.useState(!0),[p,g]=c.useState({show:!1,message:"",type:"success"});c.useEffect(()=>{const m=ee(y,async h=>{if(h){i(h);const v=w(C,"user-data",h.uid),N=await B(v);N.exists()?(t(N.data()),s("main")):(t(he()),s("setup"))}else i(null),t(null),s("welcome");o(!1)}),u=setTimeout(()=>{d&&(s("welcome"),o(!1))},3e3);return()=>{m(),clearTimeout(u)}},[]);const x=(m,u="success")=>{g({show:!0,message:m,type:u})},l=()=>{if(d)return e.jsx(ae,{});switch(a){case"welcome":return e.jsx(M,{setScreen:s});case"setup":return e.jsx(re,{setScreen:s});case"main":return e.jsx(de,{setScreen:s});case"settings":return e.jsx(ue,{setScreen:s});default:return e.jsx(M,{setScreen:s})}};return e.jsx(I.Provider,{value:{appState:n,setAppState:t,user:j,showNotification:x},children:e.jsx("div",{id:"app",children:l()})})},D=document.getElementById("app");D?se.createRoot(D).render(e.jsx(te.StrictMode,{children:e.jsx(me,{})})):console.error("Failed to find the root element");
