import{j as e,i as I,g as T,a as U,G as z,s as G,r as c,d as A,b as E,c as W,e as C,f as $,q as O,o as K,l as P,h as q,u as M,k as H,m as Y,R as V,n as J}from"./vendor-D_mzKZSi.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const h of i.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function a(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(t){if(t.ep)return;t.ep=!0;const i=a(t);fetch(t.href,i)}})();const Z=({setScreen:l})=>e.jsxs("div",{className:"screen",id:"splash-screen",children:[e.jsxs("svg",{className:"splash-logo",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"#F0E7DD"}),e.jsx("path",{d:"M50,10 A40,40 0 0,1 90,50",fill:"none",stroke:"#8B5E3C",strokeWidth:"8"}),e.jsx("path",{d:"M50,90 A40,40 0 0,1 10,50",fill:"none",stroke:"#D4A373",strokeWidth:"8"}),e.jsx("circle",{cx:"50",cy:"50",r:"20",fill:"#fff"}),e.jsx("path",{d:"M50 38 C 55 42, 55 48, 50 52 S 45 58, 50 62",stroke:"#5E7A6E",strokeWidth:"4",fill:"none",strokeLinecap:"round"})]}),e.jsx("h1",{className:"splash-title",children:"–°–ï–ú–ï–ô–ù–û–ï –ú–ï–ù–Æ"}),e.jsxs("div",{className:"splash-features",children:[e.jsxs("div",{className:"feature-slide",children:[e.jsx("div",{className:"feature-icon",children:"üóìÔ∏è"}),e.jsx("div",{className:"feature-text",children:"–ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ –º–µ–Ω—é –Ω–∞ –Ω–µ–¥–µ–ª—é"})]}),e.jsxs("div",{className:"feature-slide",children:[e.jsx("div",{className:"feature-icon",children:"üõí"}),e.jsx("div",{className:"feature-text",children:"–°–æ—Å—Ç–∞–≤–ª—è–π—Ç–µ —É–º–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫"})]}),e.jsxs("div",{className:"feature-slide",children:[e.jsx("div",{className:"feature-icon",children:"üë©‚Äçüç≥"}),e.jsx("div",{className:"feature-text",children:"–ì–æ—Ç–æ–≤—å—Ç–µ –ª–µ–≥–∫–æ –ø–æ —à–∞–≥–∞–º"})]})]}),e.jsxs("div",{className:"splash-author",children:["–ê–≤—Ç–æ—Ä: –ö–ª–∏–º–æ–≤ –ï–≤–≥–µ–Ω–∏–π",e.jsx("br",{}),e.jsx("a",{href:"https://t.me/eklimov",target:"_blank",rel:"noopener noreferrer",children:"Telegram: @eklimov"})]})]}),_={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},L=I(_),p=T(L),w=U(L),R=({setScreen:l})=>{const s=async()=>{const a=new z;try{await G(p,a)}catch(n){console.error("–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ Google:",n)}};return e.jsx("div",{className:"screen",id:"welcome-screen",children:e.jsxs("div",{className:"setup-container",children:[e.jsxs("svg",{className:"setup-logo",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"#F0E7DD"}),e.jsx("path",{d:"M50,10 A40,40 0 0,1 90,50",fill:"none",stroke:"#8B5E3C",strokeWidth:"8"}),e.jsx("path",{d:"M50,90 A40,40 0 0,1 10,50",fill:"none",stroke:"#D4A373",strokeWidth:"8"}),e.jsx("circle",{cx:"50",cy:"50",r:"20",fill:"#fff"}),e.jsx("path",{d:"M50 38 C 55 42, 55 48, 50 52 S 45 58, 50 62",stroke:"#5E7A6E",strokeWidth:"4",fill:"none",strokeLinecap:"round"})]}),e.jsx("h1",{className:"setup-title",children:"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!"}),e.jsx("p",{className:"setup-subtitle",children:"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à–µ –º–µ–Ω—é –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏."}),e.jsx("div",{className:"welcome-buttons",children:e.jsxs("button",{className:"primary-button",id:"google-signin-btn",onClick:s,children:[e.jsxs("svg",{style:{width:"20px",height:"20px",verticalAlign:"middle",marginRight:"10px"},viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"white",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#4A90E2",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"}),e.jsx("path",{fill:"#FBBC05",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"}),e.jsx("path",{fill:"none",d:"M1 1h22v22H1z"})]}),"–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google"]})}),e.jsx("p",{className:"welcome-info",children:"–í—Ö–æ–¥ –ø–æ–∑–≤–æ–ª–∏—Ç –≤–∞–º –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –æ–±–ª–∞–∫–µ."})]})})},Q=({setScreen:l})=>{const[s,a]=c.useState(1),[n,t]=c.useState({apiKey:"",familyName:"",familyMembers:[],preferences:"",dietaryRestrictions:"",kitchenAppliances:""}),[i,h]=c.useState(""),[u,x]=c.useState(!1),j=4,f=()=>{s<j&&a(s+1)},o=()=>{s>1&&a(s-1)},m=d=>{const{name:r,value:y}=d.target;t(N=>({...N,[r]:y}))},g=()=>{i.trim()!==""&&(t(d=>({...d,familyMembers:[...d.familyMembers,i.trim()]})),h(""))},b=d=>{t(r=>({...r,familyMembers:r.familyMembers.filter((y,N)=>N!==d)}))},v=async()=>{if(!p.currentUser){console.error("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω. –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.");return}x(!0);try{const d=A(w,"users",p.currentUser.uid);await E(d,{...n,setupComplete:!0,createdAt:new Date}),l("main")}catch(d){console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:",d)}finally{x(!1)}},k=()=>{switch(s){case 1:return e.jsxs("div",{children:[e.jsx("h2",{className:"wizard-step-title",children:"–®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"}),e.jsx("p",{className:"wizard-step-description",children:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à API-–∫–ª—é—á –æ—Ç Google AI Studio –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–µ–Ω—é. –≠—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ, –∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –≤–∞—à–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ."}),e.jsxs("div",{className:"settings-form-group",children:[e.jsx("label",{htmlFor:"api-key-input",children:"–í–∞—à Google Gemini API –ö–ª—é—á"}),e.jsx("input",{id:"api-key-input",name:"apiKey",type:"password",value:n.apiKey,onChange:m,placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à API –∫–ª—é—á"}),e.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"api-key-help-link",children:"–ì–¥–µ –≤–∑—è—Ç—å –∫–ª—é—á?"})]})]});case 2:return e.jsxs("div",{children:[e.jsx("h2",{className:"wizard-step-title",children:"–®–∞–≥ 2: –í–∞—à–∞ —Å–µ–º—å—è"}),e.jsx("p",{className:"wizard-step-description",children:"–î–∞–≤–∞–π—Ç–µ –ø–æ–∑–Ω–∞–∫–æ–º–∏–º—Å—è! –ù–∞–∑–æ–≤–∏—Ç–µ –≤–∞—à—É —Å–µ–º—å—é –∏ –¥–æ–±–∞–≤—å—Ç–µ –µ–µ —á–ª–µ–Ω–æ–≤. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç AI –ª—É—á—à–µ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ–Ω—é."}),e.jsxs("div",{className:"settings-form-group",children:[e.jsx("label",{htmlFor:"familyName",children:'–ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ–º—å–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ò–≤–∞–Ω–æ–≤—ã")'}),e.jsx("input",{id:"familyName",name:"familyName",type:"text",value:n.familyName,onChange:m,placeholder:"–°–µ–º—å—è –ò–≤–∞–Ω–æ–≤—ã—Ö"})]}),e.jsxs("div",{className:"settings-form-group",children:[e.jsx("label",{children:"–ß–ª–µ–Ω—ã —Å–µ–º—å–∏"}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[e.jsx("input",{type:"text",value:i,onChange:d=>h(d.target.value),placeholder:"–ò–º—è",style:{flexGrow:1}}),e.jsx("button",{type:"button",onClick:g,className:"secondary-button",style:{width:"auto",padding:"0 20px"},children:"–î–æ–±–∞–≤–∏—Ç—å"})]}),e.jsx("div",{children:n.familyMembers.map((d,r)=>e.jsxs("div",{className:"family-member-card",children:[e.jsx("span",{children:d}),e.jsx("button",{onClick:()=>b(r),children:"√ó"})]},r))})]})]});case 3:return e.jsxs("div",{children:[e.jsx("h2",{className:"wizard-step-title",children:"–®–∞–≥ 3: –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –≤ –µ–¥–µ"}),e.jsx("p",{className:"wizard-step-description",children:"–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –≤–∞—à–∏—Ö –≤–∫—É—Å–∞—Ö, —á—Ç–æ–±—ã –º–µ–Ω—é –±—ã–ª–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥—è—â–∏–º."}),e.jsxs("div",{className:"settings-form-group",children:[e.jsx("label",{htmlFor:"preferences",children:"–û–±—â–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è"}),e.jsx("textarea",{id:"preferences",name:"preferences",value:n.preferences,onChange:m,placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: –ª—é–±–∏–º –∏—Ç–∞–ª—å—è–Ω—Å–∫—É—é –∫—É—Ö–Ω—é, –Ω–µ–∂–∏—Ä–Ω–æ–µ –º—è—Å–æ, –±–æ–ª—å—à–µ –æ–≤–æ—â–µ–π, –ø—Ä–æ—Å—Ç—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã",rows:3})]}),e.jsxs("div",{className:"settings-form-group",children:[e.jsx("label",{htmlFor:"dietaryRestrictions",children:"–î–∏–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏–ª–∏ –∞–ª–ª–µ—Ä–≥–∏–∏"}),e.jsx("textarea",{id:"dietaryRestrictions",name:"dietaryRestrictions",value:n.dietaryRestrictions,onChange:m,placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: –±–µ–∑ –≥–ª—é—Ç–µ–Ω–∞, –∞–ª–ª–µ—Ä–≥–∏—è –Ω–∞ –æ—Ä–µ—Ö–∏, –≤–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å—Ç–≤–æ",rows:3})]}),e.jsxs("div",{className:"settings-form-group",children:[e.jsx("label",{htmlFor:"kitchenAppliances",children:"–ö–∞–∫–∞—è –∫—É—Ö–æ–Ω–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ —É –≤–∞—Å –µ—Å—Ç—å?"}),e.jsx("textarea",{id:"kitchenAppliances",name:"kitchenAppliances",value:n.kitchenAppliances,onChange:m,placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: –º—É–ª—å—Ç–∏–≤–∞—Ä–∫–∞, –±–ª–µ–Ω–¥–µ—Ä, –¥—É—Ö–æ–≤–∫–∞, –º–∏–∫—Ä–æ–≤–æ–ª–Ω–æ–≤–∫–∞",rows:3})]})]});case 4:return e.jsxs("div",{children:[e.jsx("h2",{className:"wizard-step-title",children:"–®–∞–≥ 4: –í—Å–µ –≥–æ—Ç–æ–≤–æ!"}),e.jsx("p",{className:"wizard-step-description",children:'–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–≤–µ–¥–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –í—ã –≤—Å–µ–≥–¥–∞ —Å–º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∏—Ö –ø–æ–∑–∂–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–≤–µ—Ä—à–∏—Ç—å", —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –≤–∞—à–µ –ø–µ—Ä–≤–æ–µ —Å–µ–º–µ–π–Ω–æ–µ –º–µ–Ω—é!'})]});default:return null}};return e.jsx("div",{className:"screen",id:"setup-screen",children:e.jsxs("div",{className:"setup-container",children:[e.jsxs("svg",{className:"setup-logo",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"#F0E7DD"}),e.jsx("path",{d:"M50,10 A40,40 0 0,1 90,50",fill:"none",stroke:"#8B5E3C",strokeWidth:"8"}),e.jsx("path",{d:"M50,90 A40,40 0 0,1 10,50",fill:"none",stroke:"#D4A373",strokeWidth:"8"}),e.jsx("circle",{cx:"50",cy:"50",r:"20",fill:"#fff"}),e.jsx("path",{d:"M50 38 C 55 42, 55 48, 50 52 S 45 58, 50 62",stroke:"#5E7A6E",strokeWidth:"4",fill:"none",strokeLinecap:"round"})]}),e.jsx("h1",{className:"setup-title",children:"–ú–∞—Å—Ç–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"}),e.jsxs("p",{className:"wizard-step-counter",children:["–®–∞–≥ ",s," –∏–∑ ",j]}),e.jsx("div",{id:"setup-wizard",children:e.jsx("div",{className:"wizard-step active",children:k()})}),e.jsxs("div",{id:"wizard-nav",children:[s>1&&e.jsx("button",{onClick:o,className:"secondary-button",disabled:u,children:"–ù–∞–∑–∞–¥"}),s<j&&e.jsx("button",{onClick:f,className:"primary-button",disabled:u,children:"–î–∞–ª–µ–µ"}),s===j&&e.jsx("button",{onClick:v,className:"primary-button",disabled:u,children:u?"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...":"–ó–∞–≤–µ—Ä—à–∏—Ç—å –∏ —Å–æ–∑–¥–∞—Ç—å –º–µ–Ω—é"})]})]})})},X=async(l,s)=>{if(!l)throw new Error("API –∫–ª—é—á –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω.");const a=new W(l),n=a?a.getGenerativeModel({model:"gemini-1.5-flash"}):null,t={temperature:.7,topK:1,topP:1,maxOutputTokens:8192,responseMimeType:"application/json"},i=`
    –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∑–¥–∞–π –ø–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω –º–µ–Ω—é –Ω–∞ 7 –¥–Ω–µ–π –¥–ª—è —Å–µ–º—å–∏.

    –í–æ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ–º—å–µ:
    - –ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ–º—å–∏: ${s.familyName||"–ù–µ —É–∫–∞–∑–∞–Ω–æ"}
    - –ß–ª–µ–Ω—ã —Å–µ–º—å–∏: ${s.familyMembers.join(", ")||"–ù–µ —É–∫–∞–∑–∞–Ω–æ"}

    –í–æ—Ç –∏—Ö –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
    - –û–±—â–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è: ${s.preferences||"–ù–µ—Ç –æ—Å–æ–±—ã—Ö –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π"}
    - –î–∏–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏–ª–∏ –∞–ª–ª–µ—Ä–≥–∏–∏: ${s.dietaryRestrictions||"–ù–µ—Ç"}
    - –î–æ—Å—Ç—É–ø–Ω–∞—è –∫—É—Ö–æ–Ω–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞: ${s.kitchenAppliances||"–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –Ω–∞–±–æ—Ä (–ø–ª–∏—Ç–∞, –¥—É—Ö–æ–≤–∫–∞)"}

    –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –º–µ–Ω—é:
    1.  –°–æ–∑–¥–∞–π –º–µ–Ω—é –Ω–∞ 7 –¥–Ω–µ–π, –Ω–∞—á–∏–Ω–∞—è —Å –∑–∞–≤—Ç—Ä–∞—à–Ω–µ–≥–æ –¥–Ω—è.
    2.  –î–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–Ω—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å —Ç—Ä–∏ –±–ª—é–¥–∞: –ó–∞–≤—Ç—Ä–∞–∫, –û–±–µ–¥ –∏ –£–∂–∏–Ω.
    3.  –ë–ª—é–¥–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–º–∏, –∑–¥–æ—Ä–æ–≤—ã–º–∏ –∏ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏.
    4.  –£—á–∏—Ç—ã–≤–∞–π, —á—Ç–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–±–µ–¥—ã –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Å—Ç–∞—Ç–∫–∞–º–∏ —É–∂–∏–Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –¥–Ω—è. –ï—Å–ª–∏ —ç—Ç–æ —Ç–∞–∫, –ø–æ–ª–µ "recipe" –¥–ª—è —ç—Ç–æ–≥–æ –±–ª—é–¥–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å null.

    –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–µ—Ä–Ω–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–≥–æ–≥–æ JSON-–æ–±—ä–µ–∫—Ç–∞ –±–µ–∑ –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ –¥—Ä—É–≥–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –∏–ª–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
    –°—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–ª—é–¥–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–ª–µ–¥—É—é—â–µ–π:
    {
      "name": "–ù–∞–∑–≤–∞–Ω–∏–µ –±–ª—é–¥–∞",
      "isLeftover": false,
      "recipe": {
        "description": "–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –±–ª—é–¥–∞.",
        "ingredients": [
          { "name": "–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç 1", "quantity": "1 —à—Ç" },
          { "name": "–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç 2", "quantity": "200 –≥" }
        ],
        "steps": [
          "–®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞...",
          "–®–∞–≥ 2: –ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ..."
        ],
        "prepTime": "15 –º–∏–Ω—É—Ç",
        "cookTime": "30 –º–∏–Ω—É—Ç",
        "servings": ${s.familyMembers.length||2}
      }
    }

    –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞:
    {
      "weekMenu": [
        {
          "day": "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫",
          "date": "YYYY-MM-DD",
          "meals": {
            "breakfast": { ... —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–ª—é–¥–∞ ... },
            "lunch": { ... —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–ª—é–¥–∞ ... },
            "dinner": { ... —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–ª—é–¥–∞ ... }
          }
        },
        // ... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–ª—è –≤—Å–µ—Ö 7 –¥–Ω–µ–π
      ]
    }
    –ó–∞–ø–æ–ª–Ω–∏ –ø–æ–ª–µ "date" –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –¥–∞—Ç–∞–º–∏ –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö 7 –¥–Ω–µ–π.
  `;try{const j=(await n.generateContent(i,t)).response.text().replace(/^```json\s*|```\s*$/g,"");return JSON.parse(j)}catch(h){throw console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ Gemini API:",h),new Error("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–µ–Ω—é. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à API-–∫–ª—é—á –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.")}},ee=({setScreen:l,setSelectedMeal:s})=>{const[a,n]=c.useState(null),[t,i]=c.useState(null),[h,u]=c.useState(!0),[x,j]=c.useState(!1),[f,o]=c.useState(""),[m,g]=c.useState("menu");c.useEffect(()=>{(async()=>{if(p.currentUser){u(!0);try{const y=A(w,"users",p.currentUser.uid),N=await C(y);if(N.exists())n(N.data());else{o("–ù–µ –Ω–∞–π–¥–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."),l("setup");return}const B=$(w,`users/${p.currentUser.uid}/menus`),F=O(B,K("createdAt","desc"),P(1)),S=await q(F);S.empty||i(S.docs[0].data())}catch(y){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:",y),o("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.")}finally{u(!1)}}})()},[]);const b=async()=>{if(!a||!a.apiKey){o("API –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö.");return}j(!0),o("");try{const r=await X(a.apiKey,a),y=new Date().toISOString(),N=A(w,`users/${p.currentUser.uid}/menus`,y);await E(N,{...r,createdAt:new Date}),i(r)}catch(r){console.error(r),o(r.message||"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–µ–Ω—é.")}finally{j(!1)}},v=r=>{r.recipe&&(s(r),l("recipe"))},k=()=>!t||!t.weekMenu?null:e.jsx("div",{id:"daily-menu-container",children:t.weekMenu.map((r,y)=>e.jsxs("div",{className:"preview-day",children:[e.jsxs("h3",{className:"preview-day-title",children:[r.day," (",r.date,")"]}),e.jsxs("div",{className:`preview-meal ${r.meals.breakfast.recipe?"clickable":""}`,onClick:()=>v(r.meals.breakfast),children:[e.jsx("span",{className:"meal-icon",children:"üç≥"}),e.jsx("span",{className:"meal-name",children:r.meals.breakfast.name})]}),e.jsxs("div",{className:`preview-meal ${r.meals.lunch.recipe?"clickable":""}`,onClick:()=>v(r.meals.lunch),children:[e.jsx("span",{className:"meal-icon",children:"ü•ó"}),e.jsxs("span",{className:"meal-name",children:[r.meals.lunch.name," ",r.meals.lunch.isLeftover&&"(–æ—Å—Ç–∞—Ç–∫–∏)"]})]}),e.jsxs("div",{className:`preview-meal ${r.meals.dinner.recipe?"clickable":""}`,onClick:()=>v(r.meals.dinner),children:[e.jsx("span",{className:"meal-icon",children:"üç≤"}),e.jsx("span",{className:"meal-name",children:r.meals.dinner.name})]})]},y))}),d=()=>{if(h)return e.jsx("div",{children:"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö..."});if(f&&!x)return e.jsxs("div",{style:{color:"red",textAlign:"center",padding:"20px"},children:["–û—à–∏–±–∫–∞: ",f]});switch(m){case"menu":return e.jsx("div",{children:x?e.jsxs("div",{style:{textAlign:"center",marginTop:"50px"},children:[e.jsx("h3",{children:"–ú–∞–≥–∏—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ... ‚ú®"}),e.jsx("p",{children:"–ù–µ–π—Ä–æ—Å–µ—Ç—å –ø–æ–¥–±–∏—Ä–∞–µ—Ç –¥–ª—è –≤–∞—Å –∏–¥–µ–∞–ª—å–Ω—ã–µ –±–ª—é–¥–∞. –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –æ–∫–æ–ª–æ –º–∏–Ω—É—Ç—ã."})]}):t?k():e.jsxs("div",{style:{textAlign:"center",marginTop:"50px"},children:[e.jsx("p",{children:"–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –º–µ–Ω—é –Ω–∞ —ç—Ç—É –Ω–µ–¥–µ–ª—é."}),e.jsx("button",{className:"primary-button",onClick:b,disabled:x,children:"‚ú® –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–µ–Ω—é —Å –ø–æ–º–æ—â—å—é AI"})]})});case"shopping":return e.jsx("div",{children:'–†–∞–∑–¥–µ–ª "–°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫" –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.'});case"budget":return e.jsx("div",{children:'–†–∞–∑–¥–µ–ª "–ë—é–¥–∂–µ—Ç" –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.'});default:return null}};return e.jsxs("div",{className:"screen",id:"main-screen",children:[e.jsxs("header",{className:"main-header",children:[e.jsx("h1",{id:"main-header-title",children:"–ú–µ–Ω—é"}),e.jsx("button",{id:"open-settings-btn",onClick:()=>l("settings"),children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V15a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51-1z"})]})})]}),e.jsx("div",{className:"content-area",children:d()}),e.jsxs("nav",{className:"bottom-nav",children:[e.jsxs("button",{className:`nav-button ${m==="menu"?"active":""}`,onClick:()=>g("menu"),children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),e.jsx("span",{children:"–ú–µ–Ω—é"})]}),e.jsxs("button",{className:`nav-button ${m==="shopping"?"active":""}`,onClick:()=>g("shopping"),children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"9",cy:"21",r:"1"}),e.jsx("circle",{cx:"20",cy:"21",r:"1"}),e.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),e.jsx("span",{children:"–ü–æ–∫—É–ø–∫–∏"})]}),e.jsxs("button",{className:`nav-button ${m==="budget"?"active":""}`,onClick:()=>g("budget"),children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),e.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),e.jsx("span",{children:"–ë—é–¥–∂–µ—Ç"})]})]})]})},se=({setScreen:l})=>{const[s,a]=c.useState(null),[n,t]=c.useState(!0),[i,h]=c.useState(!1);c.useEffect(()=>{(async()=>{if(p.currentUser){t(!0);const m=A(w,"users",p.currentUser.uid),g=await C(m);g.exists()&&a(g.data()),t(!1)}})()},[]);const u=o=>{const{name:m,value:g}=o.target;a(b=>({...b,[m]:g}))},x=async()=>{if(p.currentUser){h(!0);try{const o=A(w,"users",p.currentUser.uid);await M(o,s),alert("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!")}catch(o){console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:",o),alert("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.")}finally{h(!1)}}},j=async()=>{try{await H(p)}catch(o){console.error("–û—à–∏–±–∫–∞ –≤—ã—Ö–æ–¥–∞:",o)}},f=async()=>{if(p.currentUser&&window.confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ?"))try{const o=A(w,"users",p.currentUser.uid);await M(o,{setupComplete:!1}),l("setup")}catch(o){console.error("–û—à–∏–±–∫–∞ —Å–±—Ä–æ—Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫:",o)}};return n?e.jsx("div",{className:"screen",children:"–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫..."}):s?e.jsxs("div",{className:"screen active",id:"settings-screen",children:[e.jsxs("header",{className:"recipe-header",children:[e.jsx("button",{className:"back-button",onClick:()=>l("main"),children:"‚Üê –ù–∞–∑–∞–¥"}),e.jsx("h2",{id:"settings-title",children:"–ù–∞—Å—Ç—Ä–æ–π–∫–∏"})]}),e.jsxs("div",{id:"settings-content",children:[e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{className:"settings-title",children:"–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"}),e.jsxs("div",{className:"settings-form-group",children:[e.jsx("label",{htmlFor:"apiKey",children:"Google Gemini API –ö–ª—é—á"}),e.jsx("input",{type:"password",id:"apiKey",name:"apiKey",value:s.apiKey,onChange:u})]}),e.jsxs("div",{className:"settings-form-group",children:[e.jsx("label",{htmlFor:"familyName",children:"–ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ–º—å–∏"}),e.jsx("input",{type:"text",id:"familyName",name:"familyName",value:s.familyName,onChange:u})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{className:"settings-title",children:"–ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è"}),e.jsxs("div",{className:"settings-form-group",children:[e.jsx("label",{htmlFor:"preferences",children:"–û–±—â–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è"}),e.jsx("textarea",{id:"preferences",name:"preferences",value:s.preferences,onChange:u,rows:3})]}),e.jsxs("div",{className:"settings-form-group",children:[e.jsx("label",{htmlFor:"dietaryRestrictions",children:"–î–∏–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è"}),e.jsx("textarea",{id:"dietaryRestrictions",name:"dietaryRestrictions",value:s.dietaryRestrictions,onChange:u,rows:3})]}),e.jsxs("div",{className:"settings-form-group",children:[e.jsx("label",{htmlFor:"kitchenAppliances",children:"–ö—É—Ö–æ–Ω–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞"}),e.jsx("textarea",{id:"kitchenAppliances",name:"kitchenAppliances",value:s.kitchenAppliances,onChange:u,rows:3})]})]}),e.jsx("button",{onClick:x,className:"primary-button",disabled:i,children:i?"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...":"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"}),e.jsxs("div",{className:"settings-section",style:{marginTop:"20px"},children:[e.jsx("h3",{className:"settings-title",style:{color:"var(--danger-color)"},children:"–û–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞"}),e.jsx("button",{onClick:j,className:"secondary-button",style:{marginBottom:"10px"},children:"–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞"}),e.jsx("button",{onClick:f,className:"danger-button",children:"–°–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ"})]})]})]}):e.jsx("div",{className:"screen",children:"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏."})},te=({setScreen:l,meal:s})=>{if(!s||!s.recipe)return e.jsxs("div",{className:"screen",id:"recipe-screen",children:[e.jsx("div",{className:"recipe-header",children:e.jsx("button",{className:"back-button",onClick:()=>l("main"),children:"‚Üê –ù–∞–∑–∞–¥"})}),e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("h2",{children:"–û—à–∏–±–∫–∞"}),e.jsx("p",{children:"–†–µ—Ü–µ–ø—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω."})]})]});const{name:a,recipe:n}=s;return e.jsxs("div",{className:"screen active",id:"recipe-screen",children:[e.jsxs("div",{className:"recipe-header",children:[e.jsx("button",{className:"back-button",onClick:()=>l("main"),children:"‚Üê –ù–∞–∑–∞–¥"}),e.jsx("h2",{id:"recipe-title",children:a})]}),e.jsxs("div",{id:"settings-content",children:[" ",e.jsx("p",{style:{textAlign:"center",margin:"-10px 0 20px",color:"#777"},children:n.description}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-around",textAlign:"center",background:"#f9f9f9",padding:"15px",borderRadius:"12px",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("div",{children:e.jsx("strong",{children:"–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞"})}),e.jsx("div",{children:n.prepTime})]}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx("strong",{children:"–ì–æ—Ç–æ–≤–∫–∞"})}),e.jsx("div",{children:n.cookTime})]}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx("strong",{children:"–ü–æ—Ä—Ü–∏–∏"})}),e.jsx("div",{children:n.servings})]})]}),e.jsxs("div",{className:"settings-section",style:{paddingTop:"10px"},children:[e.jsx("h3",{className:"settings-title",children:"–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã"}),e.jsx("ul",{id:"step-ingredients",children:n.ingredients.map((t,i)=>e.jsxs("li",{children:[e.jsx("span",{children:t.name}),e.jsx("span",{className:"ingredient-quantity",children:t.quantity})]},i))})]}),e.jsxs("div",{className:"settings-section",style:{paddingTop:"10px"},children:[e.jsx("h3",{className:"settings-title",children:"–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏"}),e.jsx("ol",{style:{paddingLeft:"20px",lineHeight:"1.6"},children:n.steps.map((t,i)=>e.jsx("li",{style:{marginBottom:"15px"},children:t},i))})]})]})]})},ne=({show:l,onClose:s,children:a})=>l?e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-content",children:[a,e.jsx("button",{onClick:s,children:"–ó–∞–∫—Ä—ã—Ç—å"})]})}):null,ie=({message:l,type:s,onClose:a})=>(c.useEffect(()=>{const n=setTimeout(()=>{a()},5e3);return()=>clearTimeout(n)},[a]),e.jsxs("div",{className:`notification ${s}`,children:[e.jsx("p",{children:l}),e.jsx("button",{onClick:a,children:"√ó"})]})),re=()=>{const[l,s]=c.useState("splash"),[a,n]=c.useState(null),[t,i]=c.useState(!0),[h,u]=c.useState(null),[x,j]=c.useState({show:!1,content:null}),[f,o]=c.useState({show:!1,message:"",type:"success"});c.useEffect(()=>{console.log("Setting up onAuthStateChanged listener...");const g=Y(p,async v=>{if(console.log("onAuthStateChanged triggered."),v){console.log("User is logged in:",v.uid),n(v);try{const k=A(w,"users",v.uid);console.log("Attempting to get user document from Firestore...");const d=await C(k);console.log("Successfully got response from Firestore."),d.exists()?(console.log("User document exists.",d.data()),d.data().setupComplete?(console.log("Setup is complete, navigating to main screen."),s("main")):(console.log("Setup is not complete, navigating to setup screen."),s("setup"))):(console.log("User document does not exist, navigating to setup screen."),s("setup"))}catch(k){console.error("Error getting user document from Firestore:",k),s("setup")}}else console.log("User is logged out, navigating to welcome screen."),n(null),s("welcome");console.log("Setting loading to false."),i(!1)}),b=setTimeout(()=>{t&&(s("welcome"),i(!1))},3e3);return()=>{g(),clearTimeout(b)}},[]);const m=()=>{if(t)return e.jsx(Z,{});switch(l){case"welcome":return e.jsx(R,{setScreen:s});case"setup":return e.jsx(Q,{setScreen:s});case"main":return e.jsx(ee,{setScreen:s,setSelectedMeal:u});case"settings":return e.jsx(se,{setScreen:s});case"recipe":return e.jsx(te,{setScreen:s,meal:h});default:return e.jsx(R,{setScreen:s})}};return e.jsxs("div",{id:"app",children:[m(),e.jsx(ne,{show:x.show,onClose:()=>j({...x,show:!1}),children:x.content}),f.show&&e.jsx(ie,{message:f.message,type:f.type,onClose:()=>o({...f,show:!1})}),e.jsx("audio",{id:"notification-sound",src:"data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YU9vT18="})]})},D=document.getElementById("app");D?V.createRoot(D).render(e.jsx(J.StrictMode,{children:e.jsx(re,{})})):console.error("Failed to find the root element");
